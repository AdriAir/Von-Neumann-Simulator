<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<title>Unidad Aritmético-Lógica</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

	<style type="text/css">
	<!--
		.reg {color: black; border: none; height: 18px; font-weight: bold; font-size: 10pt}
		.regC {color: red; border: none; height: 18px; font-weight: bold; font-size: 10pt}
		.regF {color: black; border: none; height: 18px; font-weight: bold; font-size: 10pt; width: 10px; height: 18px; font-weight: bold; font-size: 10pt}
		.regFC {color: red; border: none; height: 18px; font-weight: bold; font-size: 10pt; width: 10px; height: 18px; font-weight: bold; font-size: 10pt}
		.cabecera {color: white; font: 18pt; font-family: sans-serif; font-weight: bold}
		.apartado {color: white; font: 14pt; font-family: sans-serif; font-weight: bold}
		BODY {font-family: sans-serif; font-size: 10pt}
		TABLE {font-family: sans-serif; font-size: 10pt}
	-->
	</style>

	<script language="JavaScript">
		function pulso()
		{
			var op1, op2, res, of2, sf2, zf2;
			
			op1 = Number(o1.value);
			op2 = Number(o2.value);
			res = ac.value;
			
			if ((op1 < -128) || (op1 > 127) || (op2 < -128) || (op2 > 127)) {
				alert("El rango de valores permitido para los registros es desde -128 hasta 127");
				return;
			}
			
			if (signal.value == "S") {
				res = op1 + op2;
			}
			else if (signal.value == "R") {
				res = op1 - op2;
			}
			else if (signal.value == "M") {
				res = op1 * op2;
			}
			else if (signal.value == "D") {
				res = Math.floor(op1 / op2);
			}
			else if (signal.value == "C") {
				res = op1 - op2;
			}
			else {
				res = op1
			}

			if (res > 127) {
				of2 = 1;
				res = res - 256;
			}
			else if (res < -128) {
				of2 = 1;
				res = 256 + res;
			}
			else {
				of2 = 0;
			}

			if (signal.value == "C") {
				ac.className = "reg";
			}
			else {
				ac.value = res;
				ac.className = "regC";
			}

			sf2 = (res < 0)?1:0;
			zf2 = (res == 0)?1:0;
			
			if (of.value != of2) of.className = "regFC"; else of.className = "regF";
			if (sf.value != sf2) sf.className = "regFC"; else sf.className = "regF";
			if (zf.value != zf2) zf.className = "regFC"; else zf.className = "regF";
			
			of.value = of2;
			sf.value = sf2;
			zf.value = zf2;
		}
	</script>
</head>

<body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">

	<table border="0" bgcolor="green" width="100%">
		<tr>
			<td class="cabecera" align="center">Esquema de Funcionamiento de la ALU</td>
		</tr>
	</table>
	<br><br>


	<table cellpadding="0" cellspacing="0" border="0" align="center">
	<tr>
		<td colspan="15"><img width="498" height="17" src="images/alu_1.gif" border="0"></td>
	</tr>
	<tr>
		<td colspan="6"><img width="116" height="21" src="images/alu_2.gif" border="0"></td>
		<td colspan="3" background="images/alu_3.gif" width="90" height="21" valign="top">
			<input name="o1" class="reg" type="text" size="9">
		</td>
		<td><img width="43" height="21" src="images/alu_4.gif" border="0"></td>
		<td colspan="2" background="images/alu_5.gif" width="90" height="21" valign="top">
			<input name="o2" class="reg" type="text" size="9">
		</td>
		<td colspan="3"><img width="159" height="21" src="images/alu_6.gif" border="0"></td>
	</tr>
	<tr>
		<td colspan="15"><img width="498" height="96" src="images/alu_7.gif" border="0"></td>
	</tr>
	<tr>
		<td colspan="13"><img width="380" height="25" src="images/alu_8.gif" border="0"></td>
		<td background="images/alu_9.gif" width="90" height="25" valign="top">
			<select name="signal">
	        	<option value="S" selected>Sumar</option>
	         	<option value="R">Restar</option>
	         	<option value="M">Multiplicar</option>
	         	<option value="D">Dividir</option>
	         	<option value="C">Comparar</option>
	         	<option value="T">Transferir</option>
	        </select>
		</td>
		<td><img width="28" height="25" src="images/alu_10.gif" border="0"></td>
	</tr>
	<tr>
		<td colspan="15"><img width="498" height="9" src="images/alu_11.gif" border="0"></td>
	</tr>
	<tr>
		<td colspan="13"><img width="380" height="25" src="images/alu_12.gif" border="0"></td>
		<td background="images/alu_13.gif" width="90" height="25" valign="top">
			<input type="button" value="Inicio" onclick="pulso()">
		</td>
		<td><img width="28" height="25" src="images/alu_14.gif" border="0"></td>
	</tr>
	<tr>
		<td colspan="15"><img width="498" height="98" src="images/alu_15.gif" border="0"></td>
	</tr>
	<tr>
		<td><img width="18" height="21" src="images/alu_16.gif" border="0"></td>
		<td background="images/alu_17.gif" width="31" height="21" valign="top">
			&nbsp;&nbsp;<input name="of" class="regF" type="text" readonly>
		</td>
		<td><img width="3" height="21" src="images/alu_18.gif" border="0"></td>
		<td background="images/alu_19.gif" width="31" height="21" valign="top">
			&nbsp;&nbsp;<input name="sf" class="regF" type="text" readonly>
		</td>
		<td><img width="3" height="21" src="images/alu_20.gif" border="0"></td>
		<td colspan="2" background="images/alu_21.gif" width="31" height="21" valign="top">
			&nbsp;&nbsp;<input name="zf" class="regF" type="text" readonly>
		</td>
		<td><img width="58" height="21" src="images/alu_22.gif" border="0"></td>
		<td colspan="3" background="images/alu_23.gif" width="98" height="21" valign="top">
			<input name="ac" class="reg" type="text" size="10" readonly>
		</td>
		<td colspan="4"><img width="225" height="21" src="images/alu_24.gif" border="0"></td>
	</tr>
	<tr>
		<td colspan="15"><img width="498" height="46" src="images/alu_25.gif" border="0"></td>
	</tr>
	<tr>
	<td><img width="18" height="1" src="images/space.gif" border="0"></td>
	<td><img width="31" height="1" src="images/space.gif" border="0"></td>
	<td><img width="3" height="1" src="images/space.gif" border="0"></td>
	<td><img width="31" height="1" src="images/space.gif" border="0"></td>
	<td><img width="3" height="1" src="images/space.gif" border="0"></td>
	<td><img width="30" height="1" src="images/space.gif" border="0"></td>
	<td><img width="1" height="1" src="images/space.gif" border="0"></td>
	<td><img width="58" height="1" src="images/space.gif" border="0"></td>
	<td><img width="31" height="1" src="images/space.gif" border="0"></td>
	<td><img width="43" height="1" src="images/space.gif" border="0"></td>
	<td><img width="24" height="1" src="images/space.gif" border="0"></td>
	<td><img width="66" height="1" src="images/space.gif" border="0"></td>
	<td><img width="41" height="1" src="images/space.gif" border="0"></td>
	<td><img width="90" height="1" src="images/space.gif" border="0"></td>
	<td><img width="28" height="1" src="images/space.gif" border="0"></td>
	</tr>
	</table>
	<br><br>

	<table border="0" cellspacing="20" width="100%"><tr><td bgcolor="#EFF3FF">
		<table border="0" bgcolor="navy" width="100%">
			<tr>
				<td class="apartado" align="center">Descripción de la ALU</td>
			</tr>
		</table>
	
		<table border="0" cellspacing="20" width="100%"><tr><td>
			Esta Unidad Aritmético-lógica trabaja con números enteros con signo. Para ello los
			representa internamente en Complemento a 2.
			La unidad es capaz de realizar operaciones aritméticas (suma, resta, multiplicación y
			división) y lógicas (comparación y transferencia) con uno o dos operandos.
			<br><br>
			
			El estado de la operaciones se refleja en los flags (indicadores):
			<table border="1" cellspacing="0" bordercolor="silver" cellpadding="5" align="center">
				<tr>
					<td width="120"><b>OF</b> <i>Overflow Flag</i></td>
					<td>
						Indicador de desbordamiento. Se activa (se pone a 1) cuando el resultado de
						una operación no cabe en un registro.
					</td>
				</tr>
				<tr>
					<td><b>SF</b> <i>Sign Flag</i></td>
					<td>
						Indicador de signo. Se activa cuando el resultado de una operación es negativo.
					</td>
				</tr>
				<tr>
					<td><b>ZF</b> <i>Zero Flag</i></td>
					<td>
						Indicador de cero. Se activa cuando el resultado de una operación es 0.
					</td>
				</tr>
			</table>
			<br><br>

		
			La comparación de dos números se realiza mediante una resta, pero el resultado no se guarda en
			el acumulador, únicamente cambia la palabra de estado (flags). Para saber la relación existente
			entre dos números hay que interpretar los flags de la siguiente forma:<br>
			<br>
	
			<table border="1" cellspacing="0" bordercolor="silver" cellpadding="5" align="center">
				<tr>
					<td><b>Relación</b></td>
					<td><b>Significado</b></td>
					<td><b>Se da cuando</b></td>
				</tr>
				<tr>
					<td>OP1 =&nbsp; OP2</td>
					<td>igual</td>
					<td>ZF=1</td>
				</tr>
				<tr>
					<td>OP1 != OP2</td>
					<td>distinto</td>
					<td>ZF=0</td>
				</tr>
				<tr>
					<td>OP1 &gt;&nbsp; OP2</td>
					<td>mayor</td>
					<td>ZF=0 y SF=0</td>
				</tr>
				<tr>
					<td>OP1 &gt;= OP2</td>
					<td>mayor o igual</td>
					<td>SF=0</td>
				</tr>
				<tr>
					<td>OP1 &lt;&nbsp; OP2</td>
					<td>menor</td>
					<td>SF != OF</td>
				</tr>
				<tr>
					<td>OP1 &lt;= OP2</td>
					<td>menor o igual</td>
					<td>ZF=0 y SF != OF</td>
				</tr>
			</table>
	
			<br><br>
			La operación transferencia se utiliza cuando se quiere copiar el contenido de un registro
			origen en otro registro destino. En este caso, a la salida de la ALU, se obtiene el mismo
			valor que le llega por la entrada O1, ignorandose la entrada O2. Dicha salida, se conecta
			al registro destino, que puede ser otro distinto al acumulador.
		</td></tr></table>
	</td></tr></table>

	
</body>
</html>